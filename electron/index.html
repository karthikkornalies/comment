<!DOCTYPE HTML>
<html>
	
	<!-- Header -->
	<head>
		<link rel="stylesheet" href="styles.css">
		<script type="text/javascript" src="core.js"></script>
		<title>Comment IV</title>
		<script>
			const clipboard = require('electron').clipboard;
			function ElectronCopy ( text ) {
				clipboard.writeText( text );
			}
		</script>
	</head>
	
	<!-- Body -->
	<body onload="UI.InitOnLoad( );">
		
		<!-- Header -->
		<header>
			<!--div id="header-icon"></div-->
			<div class="gerda-header-name">
				<span style="font-size: 24.0px; color: #ccc;">
					<span id="logoFont">
						Comment IV
					</span>
				</span>
			</div>
			<div class="kary-header-logo">
				<img src="kf-logo.png" width="200px;" draggable="false"/>
			</div>
		</header>
		
		<!-- Body -->
		<div id="container" >
			<div id="control-bar" class="containerChildern">
				
				<!-- Comment Model -->
				<div class="controlBarTitle controlBarTitleTop">
					Inspector
				</div>
				<div class="control-bar-spacer"></div>
				
				<!-- Comment Kind Control -->
				<div class="button-zone">
					
					<!-- Kind Choose Box -->
					Kind <select id="commentformatbox" onchange="UI.DisplayInputBoxes()" onclick="UI.DisplayInputBoxes()" onselect="UI.DisplayInputBoxes()" class="text-box-base choose-box-extention">
						<option value="class">Class Comment</option>
						<option value="flag">Flag Comment</option>
						<option value="section" selected="selected">Section Comment</option>
						<option value="subsection">Subsection Comment</option>
						<option value="insection">InSection Comment</option>
						<option value="line">Line Comment</option>
						<option value="subline">SubLine Comment</option>
						<option value="separator">Separator Comment</option>
						<!--option value="note">Note Comment</option-->
					</select>
					
					<!-- Buttons -->
					<button id="GenerateButton" class="text-box-base text-box-button-extention" onclick="UI.CreateNewComment( );">Make</button>
					
					<button id="GenerateButton" class="text-box-base text-box-button-extention" onclick="UI.CopyComment( );">Copy</button>

					<button class="text-box-base text-box-button-extention" onclick="UI.CleanCommentView( );">Clean</button>
					<div style="clear: both;"></div>
				</div>
				
				
				<!-- Inputs -->
				<div class="control-bar-spacer"></div>
				<div class="controlBarTitle">
					Preferences
				</div>
				<div class="control-bar-spacer"></div>
				<div class="button-zone">
					
					<!-- Text Value -->
					<span id="one-line-value-div">
						Text <input type="text" id="cp-value" name="cp-value" value="Hello World" size="16" onkeypress="UI.OnTextInputKeyPress( event )" /><br />
					</span>
					
					<!-- Size Value -->
					<span id="size-value-div">
						Length <input type="text" id="cp-size" name="cp-size" value="80" size="3"  onkeypress="UI.OnTextInputKeyPress( event )"/>
					</span>
					
					<!-- Index Value -->
					<span id="index-value-div">
						Index <input type="text" id="cp-index" name="cp-index" value="1" size="3"  onkeypress="UI.OnTextInputKeyPress( event )"/> 
					</span>
					
					<!-- Separator Character -->
					<span id="separator-value-div" style="display: none;">
						Character <select id="cp-separator"  class="text-box-base choose-box-extention text-box-monofont" onselect="UI.OnTextInputKeyPress( event )">
							<option value="&bull;">&bull;</option>
							<option value="&dash;">&dash;</option>
							<option value="&ast;">&ast;</option>
							<option value="&times;">&times;</option>
						</select>
					</span>
				</div>
				
				
				<div class="control-bar-spacer"></div>
				<div class="controlBarTitle">
					Indentation
				</div>
				<div class="control-bar-spacer"></div>
				<div class="button-zone">
					
					<!-- Indent Size -->
					Scope <input type="text" id="ci-size" name="cp-indent" value="0" size="1" />
					
					<!-- Indentation Style -->
					as <select id="ci-string"  class="text-box-base choose-box-extention">
						<option value="&#09;">Tab</option>
						<option value="&nbsp;">1 Space</option>
						<option value="&nbsp;&nbsp;">2 Spaces</option>
						<option value="&nbsp;&nbsp;&nbsp;">3 Spaces</option>
						<option value="&nbsp;&nbsp;&nbsp;&nbsp;">4 Spaces</option>
						<option value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;">5 Spaces</option>
					</select>
				</div>
				
				
				<!-- Language Settings -->
				<div class="control-bar-spacer"></div>
				<div class="controlBarTitle">
					Language
				</div>
				<div class="control-bar-spacer"></div>
				<div class="button-zone">
					
					<!-- Comment Chars -->
					<input type="text" id="cs-top-left" name="cs-top-left" class="text-box-monofont" value="/*" size="2" onchange="UI.UpdateAndStoreCommentCharacters( )">
					
					<input type="text" id="cs-top-right" name="cs-top-right" class="text-box-monofont" value="*" size="2" onchange="UI.UpdateAndStoreCommentCharacters( )">
					
					<input type="text" id="cs-one-line" name="cs-one-line" class="text-box-monofont" value="//" size="3" onchange="UI.UpdateAndStoreCommentCharacters( )"><br />
					
					<input type="text" id="cs-bottom-left" name="cs-bottom-left" class="text-box-monofont" value=" *" size="2" onchange="UI.UpdateAndStoreCommentCharacters( )">
					
					<input type="text" id="cs-bottom-right" name="cs-bottom-right" class="text-box-monofont" value="*/" size="2" onchange="UI.UpdateAndStoreCommentCharacters( )">
					
					<div style="clear: both;"></div>
				</div>
			</div>
			
			<!-- Where the Comments are displayed -->
			<div id="view" class="containerChildern kary-horse-back-show">
			</div>
		</div>
		
		
		
		<script>
			const remote = require('electron').remote;
			const Menu = remote.Menu;
			const MenuItem = remote.MenuItem;

			var menu = new Menu();

			window.addEventListener( 'contextmenu' , function ( e ) {
				e.preventDefault( );
				menu.popup( remote.getCurrentWindow() );
			}, false);
			
			var template = [
				{
					label: 'Edit',
					submenu: [
						{
							label: 'Undo',
							accelerator: 'CmdOrCtrl+Z',
							role: 'undo'
						},
						{
							label: 'Redo',
							accelerator: 'Shift+CmdOrCtrl+Z',
							role: 'redo'
						},
						{
							type: 'separator'
						},
						{
							label: 'Cut',
							accelerator: 'CmdOrCtrl+X',
							role: 'cut'
						},
						{
							label: 'Copy',
							accelerator: 'CmdOrCtrl+C',
							role: 'copy'
						},
						{
							label: 'Paste',
							accelerator: 'CmdOrCtrl+V',
							role: 'paste'
						},
						{
							label: 'Select All',
							accelerator: 'CmdOrCtrl+A',
							role: 'selectall'
						},
					]
				},
				{
					label: "Engine",
					submenu: [
						{
							label: 'Generate Comment',
							accelerator: ( function( ) {
								if ( process.platform == 'darwin' )
									return 'Command+Enter'
								else
									return 'F5'
							})(),
							click: function( item , focusedWindow ) {
								if ( focusedWindow )
									UI.CreateNewComment( );
							}
						},
						{
							label: 'Copy Comment',
							accelerator: ( function( ) {
								if ( process.platform == 'darwin' )
									return 'Command+Alt+C'
								else
									return 'Alt+Crtl+C'
							})(),
							click: function( item , focusedWindow ) {
								if ( focusedWindow )
									UI.CopyComment( ); 
							}
						},
					]	
				},
				{
					label: 'View',
					submenu: [
						{
							label: 'Clean View',
							accelerator: 'CmdOrCtrl+R',
							click: function( item , focusedWindow ) {
							if ( focusedWindow )
								UI.CleanCommentView( );
							}
						},
						{
							label: 'Reload',
							click: function( item , focusedWindow ) {
							if ( focusedWindow )
								focusedWindow.reload( );
							}
						},
						{
							label: 'Toggle Full Screen',
							accelerator: ( function( ) {
								if ( process.platform == 'darwin' )
									return 'Ctrl+Command+F'
								else
									return 'F11'
							})(),
							click: function( item , focusedWindow ) {
								if ( focusedWindow )
									focusedWindow.setFullScreen( !focusedWindow.isFullScreen( ) )
							}
						},
						{
							label: 'Toggle Developer Tools',
							accelerator: ( function( ) {
								if ( process.platform == 'darwin' )
									return 'Alt+Command+I'
								else
									return 'Ctrl+Shift+I'
								})( ),
								click: function( item , focusedWindow ) {
								if ( focusedWindow )
									focusedWindow.toggleDevTools( )
							}
						},
					]
				},
				{
					label: 'Window',
					role: 'window',
					submenu: [
						{
							label: 'Minimize',
							accelerator: 'CmdOrCtrl+M',
							role: 'minimize'
						},
						{
							label: 'Close',
							accelerator: 'CmdOrCtrl+W',
							role: 'close'
						},
					]
				},
				{
					label: 'Help',
					role: 'help',
					submenu: [
						{
							label: "Kary Foundation Style Comment Toturials",
							click: function( ) { 
								require('electron').shell.openExternal('https://github.com/karyfoundation/comment/wiki') 
							}
						},
						{
							label: "Kary Foundtation's Website",
							click: function( ) { 
								require('electron').shell.openExternal('https://www.karyfoundation.org/') 
							}
						},
						{
							label: "Comment IV on GitHub",
							click: function( ) { 
								require('electron').shell.openExternal('https://github.com/karyfoundation/comment') 
							}
						}
					]
				},
			];

			if ( process.platform == 'darwin' ) {
				var name = require('electron').remote.app.getName( );
				template.unshift(
					{
						label: name,
						submenu: [
							{
								label: 'About ' + name,
								role: 'about'
							},
							{
								type: 'separator'
							},
							{
								label: 'Services',
								role: 'services',
								submenu: []
							},
							{
								type: 'separator'
							},
							{
								label: 'Hide ' + name,
								accelerator: 'Command+H',
								role: 'hide'
							},
							{
								label: 'Hide Others',
								accelerator: 'Command+Alt+H',
								role: 'hideothers'
							},
							{
								label: 'Show All',
								role: 'unhide'
							},
							{
								type: 'separator'
							},
							{
								label: 'Quit',
								accelerator: 'Command+Q',
								click: function( ) { app.quit(); }
							},
						]
					}
				);
					
				// Window menu.
				template[ 3 ].submenu.push(
					{
						type: 'separator'
					},
					{
						label: 'Bring All to Front',
						role: 'front'
					}
				);
			}
			
			var menu = Menu.buildFromTemplate( template );
			Menu.setApplicationMenu( menu );
		</script>
	</body>
</html>